Page MIDI_Live
    Attributes
        ID               : 0
        Scope            : local
        Send Component ID: disabled
        Width            : 800
        Locked           : no
        Fill             : solid color
        Back. Color      : 65535
    
    Events
        Preinitialize Event
            // Display username
            if(User_Settings.userNum.val==0)
            {
                tUser.txt=" "+User_Settings.u0Name.txt
            }else if(User_Settings.userNum.val==1)
            {
                tUser.txt=" "+User_Settings.u1Name.txt
            }else if(User_Settings.userNum.val==2)
            {
                tUser.txt=" "+User_Settings.u2Name.txt
            }
            //
            tmTCButtonHold.tim=Other_Settings.nHoldTime.val
            // Default update mode is on release.
            vis bModeImmediate,0
            vis bModeManual,0
            vis bApply,0
            vis bModeRelease,1
            sMode.txt=bModeRelease.txt
            // Default volume mode is Auto.
            vis bRel,0
            vis bAbs,0
            vis bAuto,1
            sVolMode.val=3
            // Functions shall be invisible
            vis fSqrt,0
            vis fSlider,0
            // Hide buttons for unavailable tesla coils
            vis bChannels,0
            vis tChannels,0
            if(TC_Settings.maxCoilCount.val<6)
            {
                vis btCoil6,0
                vis nOn6,0
                vis tBar6,0
                vis nDuty6,0
            }
            if(TC_Settings.maxCoilCount.val<5)
            {
                vis btCoil5,0
                vis nOn5,0
                vis tBar5,0
                vis nDuty5,0
            }
            if(TC_Settings.maxCoilCount.val<4)
            {
                vis btCoil4,0
                vis nOn4,0
                vis tBar4,0
                vis nDuty4,0
            }
            if(TC_Settings.maxCoilCount.val<3)
            {
                vis btCoil3,0
                vis nOn3,0
                vis tBar3,0
                vis nDuty3,0
            }
            if(TC_Settings.maxCoilCount.val<2)
            {
                // Single Coil Mode. No need to show a select option.
                vis btCoil2,0
                vis nOn2,0
                vis tBar2,0
                vis nDuty2,0
                vis btCoil1,0
                vis nOn1,0
                vis tBar1,0
                vis nDuty1,0
                vis tCoil,0
                vis tChnInfo,0
                // ... But we need a button to change the MIDI Channels
                vis bChannels,1
                vis tChannels,1
                // Make sure that the coil is active.
                btCoil1.val=1
                click btCoil1,0
            }
            // Load button state. Note: At the time of writing I didn't know that Nextion now supports bitwise operations.
            sys0=32
            sys1=TC_Settings.activeCoils.val
            if(sys1>=sys0)
            {
                btCoil6.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil5.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil4.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil3.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil2.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil1.val=1
                sys1-=sys0
            }
            // Load user's ontime and duty limit.
            if(User_Settings.userNum.val==2)
            {
                userOnLimit.val=User_Settings.u2Ontime.val
                userDutyLimit.val=User_Settings.u2Duty.val
            }else if(User_Settings.userNum.val==1)
            {
                userOnLimit.val=User_Settings.u1Ontime.val
                userDutyLimit.val=User_Settings.u1Duty.val
            }else
            {
                userOnLimit.val=User_Settings.u0Ontime.val
                userDutyLimit.val=User_Settings.u0Duty.val
            }
            // Load Ontime and Duty from variables. Note: variables take much less space than displayed elements and are therefore better as persistent (= global) variables.
            nOn.val=ontime.val
            nDuty.val=duty.val
            nOn1.val=set1.val&0xffff
            set1.val=set1.val>>16
            nDuty1.val=set1.val&0xffff
            nOn2.val=set2.val&0xffff
            set2.val=set2.val>>16
            nDuty2.val=set2.val&0xffff
            nOn3.val=set3.val&0xffff
            set3.val=set3.val>>16
            nDuty3.val=set3.val&0xffff
            nOn4.val=set4.val&0xffff
            set4.val=set4.val>>16
            nDuty4.val=set4.val&0xffff
            nOn5.val=set5.val&0xffff
            set5.val=set5.val>>16
            nDuty5.val=set5.val&0xffff
            nOn6.val=set6.val&0xffff
            set6.val=set6.val>>16
            nDuty6.val=set6.val&0xffff
            // Restore slider positions
            fSliderInput.val=sDuty.maxval
            fSliderOutput.val=userDutyLimit.val
            fSlider.val=nDuty.val
            click fSlider,0
            sDuty.val=fSlider.val
            fSliderInput.val=sOn.maxval
            fSliderOutput.val=userOnLimit.val
            fSlider.val=nOn.val
            click fSlider,0
            sOn.val=fSlider.val
            // Tell the microcontroller: Mode: Midi Live
            prints "mml",3
        
        Postinitialize Event
            // Make sure the microcontroller is up-to-date
            click bApply,0
        
        Touch Press Event
            if(Other_Settings.nBackOff.val!=0)
            {
                // Default "stop" action. Set ontime of all Coils to 0
                // Details about the data format described in a separate file and in the bApply button.
                // shift bits for volume mode
                sys1=3<<6
                sys1+=63 // apply to all coils
                prints "d",1
                prints sys1,1
                prints 0,4 // 0 ontime, 0 duty
                nOn.val=0
                sOn.val=0
                nOn1.val=0
                nOn2.val=0
                nOn3.val=0
                nOn4.val=0
                nOn5.val=0
                nOn6.val=0
                nDuty.val=0
                sDuty.val=0
                nDuty1.val=0
                nDuty2.val=0
                nDuty3.val=0
                nDuty4.val=0
                nDuty5.val=0
                nDuty6.val=0
            }
        
        Page Exit Event
            // Store Ontime and Duty in global variables. Note: variables take much less space than displayed elements and are therefore better as persistent (= global) variables.
            ontime.val=nOn.val
            duty.val=nDuty.val
            set1.val=nDuty1.val<<16
            set1.val+=nOn1.val
            set2.val=nDuty2.val<<16
            set2.val+=nOn2.val
            set3.val=nDuty3.val<<16
            set3.val+=nOn3.val
            set4.val=nDuty4.val<<16
            set4.val+=nOn4.val
            set5.val=nDuty5.val<<16
            set5.val+=nOn5.val
            set6.val=nDuty6.val<<16
            set6.val+=nOn6.val
        
Variable (string) sMode
    Attributes
        ID            : 13
        Scope         : local
        Locked        : no
        Text          : newtxt
        Max. Text Size: 16
    
Variable (string) sCoil
    Attributes
        ID            : 28
        Scope         : local
        Locked        : no
        Text          : 0
        Max. Text Size: 3
    
Variable (int32) newData
    Attributes
        ID    : 29
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) sVolMode
    Attributes
        ID    : 33
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) ontime
    Attributes
        ID    : 34
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) duty
    Attributes
        ID    : 35
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) openEE
    Attributes
        ID    : 38
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) set1
    Attributes
        ID    : 58
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) set2
    Attributes
        ID    : 59
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) set3
    Attributes
        ID    : 60
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) set4
    Attributes
        ID    : 61
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) set5
    Attributes
        ID    : 62
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) set6
    Attributes
        ID    : 63
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) fSliderInput
    Attributes
        ID    : 65
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) fSliderOutput
    Attributes
        ID    : 66
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) userOnLimit
    Attributes
        ID    : 67
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) userDutyLimit
    Attributes
        ID    : 68
        Scope : local
        Locked: no
        Value : 0
    
Number nOn
    Attributes
        ID                      : 6
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 242
        y coordinate            : 90
        Width                   : 84
        Height                  : 40
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 9999
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nOn1
    Attributes
        ID                      : 40
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 242
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nDuty1
    Attributes
        ID                      : 42
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 297
        y coordinate            : 308
        Width                   : 25
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nOn2
    Attributes
        ID                      : 43
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 335
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nDuty2
    Attributes
        ID                      : 45
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 389
        y coordinate            : 308
        Width                   : 25
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nOn3
    Attributes
        ID                      : 46
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 428
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nDuty3
    Attributes
        ID                      : 48
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 482
        y coordinate            : 308
        Width                   : 25
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nOn4
    Attributes
        ID                      : 49
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 521
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nDuty4
    Attributes
        ID                      : 51
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 575
        y coordinate            : 308
        Width                   : 25
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nOn5
    Attributes
        ID                      : 52
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 614
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nDuty5
    Attributes
        ID                      : 54
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 668
        y coordinate            : 308
        Width                   : 25
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nOn6
    Attributes
        ID                      : 55
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 707
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number nDuty6
    Attributes
        ID                      : 57
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 761
        y coordinate            : 308
        Width                   : 25
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Number fSlider
    Attributes
        ID                      : 64
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 771
        y coordinate            : 18
        Width                   : 29
        Height                  : 18
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 65535
        Horizontal Alignment    : center
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : enabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // fXxxx are functions. Since they need to be clicked to execute their code they need to be on the same page. Usage:
            // 1. set the component value (fXxx.val) to the input value
            // 2. Execute code with "click fXxxx,1".
            // 3. Read the result from the component value (fXxx.val)
            //
            // Touch Press: g = o * f(x / i) with f(x) = (x^2 + x) / 2, i: input range, o: output range. => g = (x^2 + i * x) * o / (2 * i^2)
            // Touch Release: g^-1 = ( sqrt( ( x * 8 + o ) * o ) - o ) * i / ( 2 * o )
            //
            sys0=fSlider.val
            fSlider.val=sys0*sys0
            sys0*=fSliderInput.val
            fSlider.val+=sys0
            fSlider.val*=fSliderOutput.val
            sys0=2*fSliderInput.val*fSliderInput.val
            fSlider.val/=sys0
        
        Touch Release Event
            // fXxxx are functions. Since they need to be clicked to execute their code they need to be on the same page. Usage:
            // 1. set the component value (fXxx.val) to the input value
            // 2. Execute code with "click fXxxx,1".
            // 3. Read the result from the component value (fXxx.val)
            //
            // Touch Press: g = o * f(x / i) with f(x) = (x^2 + x) / 2, i: input range, o: output range. => g = (x^2 + i * x) * o / (2 * i^2)
            // Touch Release: g^-1 = ( sqrt( ( x * 8 + o ) * o ) - o ) * i / ( 2 * o )
            //
            fSqrt.val=fSlider.val*8
            fSqrt.val+=fSliderOutput.val
            fSqrt.val*=fSliderOutput.val
            click fSqrt,1
            fSqrt.val-=fSliderOutput.val
            fSqrt.val*=fSliderInput.val
            sys0=2*fSliderOutput.val
            fSlider.val=fSqrt.val/sys0
        
Number fSqrt
    Attributes
        ID                      : 69
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 771
        y coordinate            : 0
        Width                   : 29
        Height                  : 18
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 65535
        Horizontal Alignment    : center
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : enabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // fXxxx are functions. Since they need to be clicked to execute their code they need to be on the same page. Usage:
            // 1. set the component value (fXxx.val) to the input value
            // 2. Execute code with "click fXxxx,1".
            // 3. Read the result from the component value (fXxx.val)
            // This functions calculates the square root. Source: https://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Binary_numeral_system_(base_2)
            sys0=0
            sys1=1
            while(sys1<=fSqrt.val)
            {
                sys1=sys1<<2
            }
            sys1=sys1>>2
            while(sys1!=0)
            {
                sys2=sys0+sys1
                if(fSqrt.val>=sys2)
                {
                    fSqrt.val-=sys2
                    sys0=sys0>>1
                    sys0+=sys1
                }else
                {
                    sys0=sys0>>1
                }
                sys1=sys1>>2
            }
            fSqrt.val=sys0
        
XFloat nDuty
    Attributes
        ID                      : 10
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 242
        y coordinate            : 145
        Width                   : 84
        Height                  : 40
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tHideBack
    Attributes
        ID                  : 2
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 358
        y coordinate        : 80
        Width               : 442
        Height              : 120
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 0
        Horizontal Alignment: center
        Vertical Alignment  : center
        Input Type          : character
        Text                :  
        Max. Text Size      : 1
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tChannels
    Attributes
        ID                  : 3
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 260
        Width               : 199
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Listen to:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
Text tTitle
    Attributes
        ID                  : 4
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 10
        Width               : 770
        Height              : 64
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 1
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : MIDI Live Mode
        Max. Text Size      : 22
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tDuty
    Attributes
        ID                  : 8
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 145
        Width               : 199
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Note Duty:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tPerc
    Attributes
        ID                  : 11
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 330
        y coordinate        : 145
        Width               : 30
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 1
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tUser
    Attributes
        ID                  : 12
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 0
        y coordinate        : 460
        Width               : 800
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 4589
        Font Color          : 65535
        Horizontal Alignment: left
        Vertical Alignment  : center
        Input Type          : character
        Text                :  Guest
        Max. Text Size      : 32
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tCoil
    Attributes
        ID                  : 14
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 260
        Width               : 199
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Apply to:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tVolMode
    Attributes
        ID                  : 15
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 200
        Width               : 199
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Vol. Mode:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tus
    Attributes
        ID                  : 20
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 330
        y coordinate        : 90
        Width               : 38
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : µs
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tChnInfo
    Attributes
        ID                  : 36
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 305
        Width               : 215
        Height              : 60
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : top
        Input Type          : character
        Text                : Keep double lined buttons \r\npressed for more settings.
        Max. Text Size      : 100
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tBar1
    Attributes
        ID                  : 41
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 287
        y coordinate        : 308
        Width               : 10
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: center
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : |
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tBar2
    Attributes
        ID                  : 44
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 380
        y coordinate        : 308
        Width               : 10
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: center
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : |
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tBar3
    Attributes
        ID                  : 47
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 473
        y coordinate        : 308
        Width               : 10
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: center
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : |
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tBar4
    Attributes
        ID                  : 50
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 566
        y coordinate        : 308
        Width               : 10
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: center
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : |
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tBar5
    Attributes
        ID                  : 53
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 659
        y coordinate        : 308
        Width               : 10
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: center
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : |
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tBar6
    Attributes
        ID                  : 56
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 752
        y coordinate        : 308
        Width               : 10
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: center
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : |
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Text tOn
    Attributes
        ID                  : 70
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 90
        Width               : 206
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Note Ontime:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click MIDI_Live,1
        
Slider sOn
    Attributes
        ID                     : 5
        Scope                  : local
        Send Component ID      : disabled
        x coordinate           : 373
        y coordinate           : 90
        Width                  : 412
        Height                 : 45
        Locked                 : no
        Direction              : horizontal
        Fill                   : image
        Cursor width           : auto
        Cursor height          : 255
        Back. Picture ID       : 27
        Slided Back. Picture ID: 65535
        Position               : 0
        Upper range limit      : 366
        Lower range limit      : 0
        Channel count          : 25
    
    Events
        Touch Press Event
            // Slider minval = 0
            // Slider maxval = SliderWidth - CursorWIdth - 1
            // => Slider resolution equals slider "pixel" resolution
            fSliderInput.val=sOn.maxval
            fSliderOutput.val=userOnLimit.val
        
        Touch Release Event
            fSlider.val=sOn.val
            click fSlider,1
            // Round down to multiples of 5
            fSlider.val/=5
            fSlider.val*=5
            if(nOn.val!=fSlider.val)
            {
                newData.val=1
                nOn.val=fSlider.val
            }
            // to understand the following lines have a look at the Touch Move code.
            // what you would actually wanna do is put the code above in touch move and perform a click event on touch move here (because your can press/release a slider, changing its value without moving it).
            // However "click" can only execute press/release events, so it gets more complicated...
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Slider sDuty
    Attributes
        ID                     : 7
        Scope                  : local
        Send Component ID      : disabled
        x coordinate           : 373
        y coordinate           : 145
        Width                  : 412
        Height                 : 45
        Locked                 : no
        Direction              : horizontal
        Fill                   : image
        Cursor width           : auto
        Cursor height          : 255
        Back. Picture ID       : 27
        Slided Back. Picture ID: 65535
        Position               : 0
        Upper range limit      : 366
        Lower range limit      : 0
        Channel count          : 25
    
    Events
        Touch Press Event
            fSliderInput.val=sDuty.maxval
            fSliderOutput.val=userDutyLimit.val
        
        Touch Release Event
            fSlider.val=sDuty.val
            click fSlider,1
            // Round down to multiples of 5
            fSlider.val/=5
            fSlider.val*=5
            if(nDuty.val!=fSlider.val)
            {
                newData.val=1
                nDuty.val=fSlider.val
            }
            // to understand the following lines have a look at the Touch Move code.
            // what you would actually wanna do is put the code above in touch move and perform a click event on touch move here (because your can press/release a slider, changing its value without moving it).
            // However "click" can only execute press/release events, so it gets more complicated...
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Button bChannels
    Attributes
        ID                               : 1
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 242
        y coordinate                     : 259
        Width                            : 260
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 11
        Back. Picture ID (Pressed)       : 12
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Channels | Pan
        Max. Text Size                   : 26
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil1.txt
        
        Touch Release Event
            // Basically copy paste from tmTCButtonHold
            MIDI_TC_Set.origin.val=dp
            covx sCoil.txt,MIDI_TC_Set.coilNum.val,0,0
            page MIDI_TC_Set
        
Button bReturn
    Attributes
        ID                               : 9
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 15
        y coordinate                     : 405
        Width                            : 156
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 7
        Back. Picture ID (Pressed)       : 8
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Return
        Max. Text Size                   : 10
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            // Set outputs to 0
            click MIDI_Live,1
        
        Touch Release Event
            // Mode: EXit.
            prints "mex",0
            page Menu
        
Button bModeRelease
    Attributes
        ID                               : 16
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 577
        y coordinate                     : 350
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : On Release
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            vis bModeRelease,0
            vis bModeManual,1
            vis bApply,1
            sMode.txt=bModeManual.txt
        
Button bApply
    Attributes
        ID                               : 17
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 577
        y coordinate                     : 405
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Apply now
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            tmEE.en=1
        
        Touch Release Event
            // Return format: 'd', data byte 1, 2, 3, 4, 5
            // Data byte 1:
            //   Bits 0-5: coils to which settings apply.
            //   Bits 6-7: Mode
            //     0 = Settings Change (not used here)
            //     1 = NRP Reset (not used here)
            //     2 = unused
            //     3 = Volume change
            // Data byte 2: ontime[us] lower byte
            // Data byte 3: ontime[us] upper byte
            // Data byte 4: duty[1/1000] lower byte
            // Data byte 5: duty[1/1000] upper byte
            sys0=newData.val*TC_Settings.activeCoils.val
            if(sys0>0)
            {
                // Update Info below coil buttons
                // Duty is displayed in %
                sys1=nDuty.val+5
                sys1/=10
                if(btCoil1.val==1)
                {
                    nOn1.val=nOn.val
                    nDuty1.val=sys1
                }
                if(btCoil2.val==1)
                {
                    nOn2.val=nOn.val
                    nDuty2.val=sys1
                }
                if(btCoil3.val==1)
                {
                    nOn3.val=nOn.val
                    nDuty3.val=sys1
                }
                if(btCoil4.val==1)
                {
                    nOn4.val=nOn.val
                    nDuty4.val=sys1
                }
                if(btCoil5.val==1)
                {
                    nOn5.val=nOn.val
                    nDuty5.val=sys1
                }
                if(btCoil6.val==1)
                {
                    nOn6.val=nOn.val
                    nDuty6.val=sys1
                }
                // shift bits for volume mode
                sys1=3<<6
                // Add which coils are affected
                sys1+=TC_Settings.activeCoils.val
                // sys2 contains ontime and duty data. In relative mode the ontime is 0, in absolute mode the duty is 0.
                sys2=0
                if(sMode.txt!=bAbs.txt)
                {
                    sys2=nDuty.val
                    sys2=sys2<<16
                }
                if(sMode.txt!=bRel.txt)
                {
                    sys2+=nOn.val
                }
                prints "d",0
                prints sys1,1
                prints sys2,4
                newData.val=0
            }
            //
            tmEE.en=0
            if(openEE.val!=0)
            {
                openEE.val=0
                // Important date! (DDMMYYYY)
                sys0=11102161
                prints "c",0
                prints sys0,3
            }
        
Button bModeImmediate
    Attributes
        ID                               : 18
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 577
        y coordinate                     : 350
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Immediately
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            vis bModeImmediate,0
            vis bModeRelease,1
            sMode.txt=bModeRelease.txt
        
Button bModeManual
    Attributes
        ID                               : 19
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 577
        y coordinate                     : 350
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Manually
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            vis bApply,0
            vis bModeManual,0
            vis bModeImmediate,1
            sMode.txt=bModeImmediate.txt
        
Button bAbs
    Attributes
        ID                               : 30
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 242
        y coordinate                     : 200
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Absolute
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            // Switch to relative mode
            vis bAbs,0
            vis bRel,1
            vis bAuto,0
            sVolMode.val=2 // see bApply button
            newData.val=1
            // Apply if wanted
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Button bRel
    Attributes
        ID                               : 31
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 242
        y coordinate                     : 200
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Relative
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            // Switch to auto mode
            vis bRel,0
            vis bAuto,1
            vis bAbs,0
            sVolMode.val=3 // see bApply button
            newData.val=1
            // Apply if wanted
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Button bAuto
    Attributes
        ID                               : 32
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 242
        y coordinate                     : 200
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Auto
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            // Change to absolute mode
            vis bAuto,0
            vis bRel,0
            vis bAbs,1
            sVolMode.val=1 // see bApply button
            newData.val=1
            // Apply if wanted
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Button bNRPReset
    Attributes
        ID                               : 39
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 186
        y coordinate                     : 405
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : NRP Reset
        Max. Text Size                   : 10
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            // Return format: 'd', data byte 1, 2, 3, 4, 5
            // Data byte 1:
            //   Bits 0-5: coils to which settings apply. (not used here)
            //   Bits 6-7: Mode
            //     0 = Settings Change (not used here)
            //     1 = NRP Reset
            //     2 = unused
            //     3 = Volume change (not used here)
            // Data byte 2-5: not used here.
            prints "d",0
            prints 0x7f,1
            prints 0xffffffff,4
        
Dual-state Button btCoil1
    Attributes
        ID                               : 21
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 242
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 25
        Back. Picture ID (Pressed)       : 26
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 1
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil1.txt
            tmTCButtonHold.en=1
        
        Touch Release Event
            // Stop and reset timer that detects long hold.
            tmTCButtonHold.en=0
            tmTCButtonHold.tim=Other_Settings.nHoldTime.val
            // A coil might have been enabled, and thus does not have the currently displayed values.
            newData.val=1
            //  Bit 0-5 correspond to the state of the buttons btCoil1-btCoil6
            sys0=btCoil1.val
            sys0=btCoil2.val*2+sys0
            sys0=btCoil3.val*4+sys0
            sys0=btCoil4.val*8+sys0
            sys0=btCoil5.val*16+sys0
            sys0=btCoil6.val*32+sys0
            // Store settings
            TC_Settings.activeCoils.val=sys0
        
Dual-state Button btCoil2
    Attributes
        ID                               : 22
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 335
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 25
        Back. Picture ID (Pressed)       : 26
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 2
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil2.txt
            tmTCButtonHold.en=1
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil3
    Attributes
        ID                               : 23
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 428
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 25
        Back. Picture ID (Pressed)       : 26
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 3
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil3.txt
            tmTCButtonHold.en=1
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil4
    Attributes
        ID                               : 24
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 521
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 25
        Back. Picture ID (Pressed)       : 26
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 4
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil4.txt
            tmTCButtonHold.en=1
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil5
    Attributes
        ID                               : 25
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 614
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 25
        Back. Picture ID (Pressed)       : 26
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 5
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil5.txt
            tmTCButtonHold.en=1
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil6
    Attributes
        ID                               : 26
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 707
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 25
        Back. Picture ID (Pressed)       : 26
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 6
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil6.txt
            tmTCButtonHold.en=1
        
        Touch Release Event
            click btCoil1,0
        
Timer tmTCButtonHold
    Attributes
        ID         : 27
        Scope      : local
        Locked     : no
        Period (ms): 800
        Enabled    : no
    
    Events
        Timer Event
            tmTCButtonHold.en=0
            MIDI_TC_Set.origin.val=dp
            covx sCoil.txt,MIDI_TC_Set.coilNum.val,0,0
            page MIDI_TC_Set
        
Timer tmEE
    Attributes
        ID         : 37
        Scope      : local
        Locked     : no
        Period (ms): 6000
        Enabled    : no
    
    Events
        Timer Event
            openEE.val=1
        
