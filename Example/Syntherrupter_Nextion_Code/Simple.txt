Page Simple
    Attributes
        ID               : 0
        Scope            : local
        Send Component ID: disabled
        Width            : 800
        Locked           : no
        Fill             : solid color
        Back. Color      : 65535
    
    Events
        Preinitialize Event
            // Display username
            if(User_Settings.userNum.val==0)
            {
                tUser.txt=" "+User_Settings.u0Name.txt
            }else if(User_Settings.userNum.val==1)
            {
                tUser.txt=" "+User_Settings.u1Name.txt
            }else if(User_Settings.userNum.val==2)
            {
                tUser.txt=" "+User_Settings.u2Name.txt
            }
            //
            ref bReturn
            // Default mode is on release.
            vis bModeImmediate,0
            vis bModeManual,0
            vis bApply,0
            vis bModeRelease,1
            sMode.txt=bModeRelease.txt
            // Functions shall be invisible
            vis fSqrt,0
            vis fSlider,0
            // Hide buttons for unavailable tesla coils
            if(TC_Settings.maxCoilCount.val<6)
            {
                vis btCoil6,0
                vis nOn6,0
                vis nBPS6,0
                vis nDuty6,0
                vis tus6,0
                vis tHz6,0
                vis tPerc6,0
            }
            if(TC_Settings.maxCoilCount.val<5)
            {
                vis btCoil5,0
                vis nOn5,0
                vis nBPS5,0
                vis nDuty5,0
                vis tus5,0
                vis tHz5,0
                vis tPerc5,0
            }
            if(TC_Settings.maxCoilCount.val<4)
            {
                vis btCoil4,0
                vis nOn4,0
                vis nBPS4,0
                vis nDuty4,0
                vis tus4,0
                vis tHz4,0
                vis tPerc4,0
            }
            if(TC_Settings.maxCoilCount.val<3)
            {
                vis btCoil3,0
                vis nOn3,0
                vis nBPS3,0
                vis nDuty3,0
                vis tus3,0
                vis tHz3,0
                vis tPerc3,0
            }
            if(TC_Settings.maxCoilCount.val<2)
            {
                // Single Coil Mode. No need to show a select option.
                vis btCoil2,0
                vis nOn2,0
                vis nBPS2,0
                vis nDuty2,0
                vis tus2,0
                vis tHz2,0
                vis tPerc2,0
                vis btCoil1,0
                vis nOn1,0
                vis nBPS1,0
                vis nDuty1,0
                vis tus1,0
                vis tHz1,0
                vis tPerc1,0
                vis tCoil,0
                // Make sure that the coil is active.
                btCoil1.val=1
                click btCoil1,0
            }
            // Load button state
            sys0=32
            sys1=TC_Settings.activeCoils.val
            if(sys1>=sys0)
            {
                btCoil6.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil5.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil4.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil3.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil2.val=1
                sys1-=sys0
            }
            sys0/=2
            if(sys1>=sys0)
            {
                btCoil1.val=1
                sys1-=sys0
            }
            // Load user's ontime and duty limit.
            if(User_Settings.userNum.val==2)
            {
                userOnLimit.val=User_Settings.u2Ontime.val
                userDutyLimit.val=User_Settings.u2Duty.val
                userBPSLimit.val=User_Settings.u2BPS.val
            }else if(User_Settings.userNum.val==1)
            {
                userOnLimit.val=User_Settings.u1Ontime.val
                userDutyLimit.val=User_Settings.u1Duty.val
                userBPSLimit.val=User_Settings.u1BPS.val
            }else
            {
                userOnLimit.val=User_Settings.u0Ontime.val
                userDutyLimit.val=User_Settings.u0Duty.val
                userBPSLimit.val=User_Settings.u0BPS.val
            }
            // Load Ontime, BPS and Duty from variables. Note: variables take much less space than displayed elements and are therefore better as persistent (= global) variables.
            nOn.val=ontime.val
            nBPS.val=BPS.val
            nDuty.val=duty.val
            // Restore slider positions
            fSliderInput.val=sDuty.maxval
            fSliderOutput.val=userDutyLimit.val
            fSlider.val=nDuty.val
            click fSlider,0
            sDuty.val=fSlider.val
            fSliderInput.val=sOn.maxval
            fSliderOutput.val=userOnLimit.val
            fSlider.val=nOn.val
            click fSlider,0
            sBPS.val=fSlider.val
            fSliderInput.val=sBPS.maxval
            fSliderOutput.val=userBPSLimit.val
            fSlider.val=nBPS.val
            click fSlider,0
            sBPS.val=fSlider.val
            // Tell the microcontroller: Mode: SImple
            prints "msi",0
        
        Postinitialize Event
            // Make sure the microcontroller is up-to-date
            click bApply,0
        
        Touch Press Event
            if(Other_Settings.nBackOff.val!=0)
            {
                // Default "stop" action. Set ontime of all Coils to 0
                // Details about the data format described in a separate file and in the bApply button.
                prints "d",1
                printh FF // All coils
                prints 0,2 // 0 ontime
                prints nBPS.val,2 // do not change frequency
                nOn.val=0
                sOn.val=0
                nOn1.val=0
                nOn2.val=0
                nOn3.val=0
                nOn4.val=0
                nOn5.val=0
                nOn6.val=0
                nDuty.val=0
                sDuty.val=0
                nDuty1.val=0
                nDuty2.val=0
                nDuty3.val=0
                nDuty4.val=0
                nDuty5.val=0
                nDuty6.val=0
            }
        
        Page Exit Event
            // Store Ontime, BPS and Duty in  variables. Note: variables take much less space than displayed elements and are therefore better as persistent (= global) variables.
            ontime.val=nOn.val
            BPS.val=nBPS.val
            duty.val=nDuty.val
        
Variable (string) sMode
    Attributes
        ID            : 20
        Scope         : local
        Locked        : no
        Text          : newtxt
        Max. Text Size: 16
    
Variable (string) sCoil
    Attributes
        ID            : 29
        Scope         : local
        Locked        : no
        Text          : 0
        Max. Text Size: 3
    
Variable (int32) newData
    Attributes
        ID    : 30
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) ontime
    Attributes
        ID    : 31
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) BPS
    Attributes
        ID    : 32
        Scope : global
        Locked: no
        Value : 100
    
Variable (int32) duty
    Attributes
        ID    : 33
        Scope : global
        Locked: no
        Value : 0
    
Variable (int32) fSliderInput
    Attributes
        ID    : 71
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) fSliderOutput
    Attributes
        ID    : 72
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) userOnLimit
    Attributes
        ID    : 73
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) userDutyLimit
    Attributes
        ID    : 74
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) userBPSLimit
    Attributes
        ID    : 75
        Scope : local
        Locked: no
        Value : 0
    
Variable (int32) keepOntime
    Attributes
        ID    : 76
        Scope : local
        Locked: no
        Value : 1
    
Variable (int32) temp
    Attributes
        ID    : 77
        Scope : local
        Locked: no
        Value : 0
    
Number nOn
    Attributes
        ID                      : 6
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 190
        y coordinate            : 90
        Width                   : 84
        Height                  : 40
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nBPS
    Attributes
        ID                      : 9
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 190
        y coordinate            : 145
        Width                   : 84
        Height                  : 40
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 100
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number fSqrt
    Attributes
        ID                      : 12
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 771
        y coordinate            : 0
        Width                   : 29
        Height                  : 18
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 65535
        Horizontal Alignment    : center
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : enabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // fXxxx are functions. Since they need to be clicked to execute their code they need to be on the same page. Usage:
            // 1. set the component value (fXxx.val) to the input value
            // 2. Execute code with "click fXxxx,1".
            // 3. Read the result from the component value (fXxx.val)
            // This functions calculates the square root. Source: https://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Binary_numeral_system_(base_2)
            sys0=0
            sys1=1
            while(sys1<=fSqrt.val)
            {
                sys1=sys1<<2
            }
            sys1=sys1>>2
            while(sys1!=0)
            {
                sys2=sys0+sys1
                if(fSqrt.val>=sys2)
                {
                    fSqrt.val-=sys2
                    sys0=sys0>>1
                    sys0+=sys1
                }else
                {
                    sys0=sys0>>1
                }
                sys1=sys1>>2
            }
            fSqrt.val=sys0
        
Number nOn1
    Attributes
        ID                      : 34
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 242
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nBPS1
    Attributes
        ID                      : 36
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 242
        y coordinate            : 328
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nOn2
    Attributes
        ID                      : 37
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 335
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nBPS2
    Attributes
        ID                      : 39
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 334
        y coordinate            : 328
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nOn3
    Attributes
        ID                      : 40
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 428
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nBPS3
    Attributes
        ID                      : 42
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 427
        y coordinate            : 328
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nOn4
    Attributes
        ID                      : 43
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 521
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nBPS4
    Attributes
        ID                      : 45
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 520
        y coordinate            : 328
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nOn5
    Attributes
        ID                      : 46
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 614
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nBPS5
    Attributes
        ID                      : 48
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 613
        y coordinate            : 328
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nOn6
    Attributes
        ID                      : 49
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 707
        y coordinate            : 308
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number nBPS6
    Attributes
        ID                      : 51
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 706
        y coordinate            : 328
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Number fSlider
    Attributes
        ID                      : 78
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 771
        y coordinate            : 18
        Width                   : 29
        Height                  : 18
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 65535
        Horizontal Alignment    : center
        Vertical Alignment      : center
        Value                   : 0
        Significant digits shown: all
        Format                  : decimal
        Word wrap               : enabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // fXxxx are functions. Since they need to be clicked to execute their code they need to be on the same page. Usage:
            // 1. set the component value (fXxx.val) to the input value
            // 2. Execute code with "click fXxxx,1".
            // 3. Read the result from the component value (fXxx.val)
            //
            // Touch Press: g = o * f(x / i) with f(x) = (x^2 + x) / 2, i: input range, o: output range. => g = (x^2 + i * x) * o / (2 * i^2)
            // Touch Release: g^-1 = ( sqrt( ( x * 8 + o ) * o ) - o ) * i / ( 2 * o )
            //
            sys0=fSlider.val
            fSlider.val=sys0*sys0
            sys0*=fSliderInput.val
            fSlider.val+=sys0
            fSlider.val*=fSliderOutput.val
            sys0=2*fSliderInput.val*fSliderInput.val
            fSlider.val/=sys0
        
        Touch Release Event
            // fXxxx are functions. Since they need to be clicked to execute their code they need to be on the same page. Usage:
            // 1. set the component value (fXxx.val) to the input value
            // 2. Execute code with "click fXxxx,1".
            // 3. Read the result from the component value (fXxx.val)
            //
            // Touch Press: g = o * f(x / i) with f(x) = (x^2 + x) / 2, i: input range, o: output range. => g = (x^2 + i * x) * o / (2 * i^2)
            // Touch Release: g^-1 = ( sqrt( ( x * 8 + o ) * o ) - o ) * i / ( 2 * o )
            //
            fSqrt.val=fSlider.val*8
            fSqrt.val+=fSliderOutput.val
            fSqrt.val*=fSliderOutput.val
            click fSqrt,1
            fSqrt.val-=fSliderOutput.val
            fSqrt.val*=fSliderInput.val
            sys0=2*fSliderOutput.val
            fSlider.val=fSqrt.val/sys0
        
XFloat nDuty
    Attributes
        ID                      : 14
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 190
        y coordinate            : 200
        Width                   : 84
        Height                  : 40
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 0
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
XFloat nDuty1
    Attributes
        ID                      : 64
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 242
        y coordinate            : 348
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
XFloat nDuty2
    Attributes
        ID                      : 65
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 334
        y coordinate            : 348
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
XFloat nDuty3
    Attributes
        ID                      : 66
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 427
        y coordinate            : 348
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
XFloat nDuty4
    Attributes
        ID                      : 67
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 519
        y coordinate            : 348
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
XFloat nDuty5
    Attributes
        ID                      : 68
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 613
        y coordinate            : 348
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
XFloat nDuty6
    Attributes
        ID                      : 69
        Scope                   : local
        Send Component ID       : disabled
        x coordinate            : 705
        y coordinate            : 348
        Width                   : 45
        Height                  : 20
        Locked                  : no
        Fill                    : solid color
        Style                   : flat
        Associated Keyboard     : none
        Font ID                 : 2
        Back. Color             : 65535
        Font Color              : 6900
        Horizontal Alignment    : right
        Vertical Alignment      : center
        Value                   : 0
        Significant digits left : 0
        Significant digits right: 1
        Word wrap               : disabled
        Horizontal Spacing      : 0
        Vertical Spacing        : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHideBack
    Attributes
        ID                  : 1
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 330
        y coordinate        : 80
        Width               : 470
        Height              : 175
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 0
        Horizontal Alignment: center
        Vertical Alignment  : center
        Input Type          : character
        Text                :  
        Max. Text Size      : 1
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // This is just to hide the background around the sliders so that you do not turn the outputs off by accident.
        
Text tTitle
    Attributes
        ID                  : 2
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 10
        Width               : 770
        Height              : 64
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 1
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Simple Mode
        Max. Text Size      : 22
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tOn
    Attributes
        ID                  : 5
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 90
        Width               : 165
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Ontime:     us
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tBPS
    Attributes
        ID                  : 8
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 145
        Width               : 165
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : BPS:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tDuty
    Attributes
        ID                  : 11
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 200
        Width               : 165
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Duty:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHz
    Attributes
        ID                  : 15
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 278
        y coordinate        : 145
        Width               : 50
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Hz
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tPerc
    Attributes
        ID                  : 16
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 278
        y coordinate        : 200
        Width               : 50
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 1
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tUser
    Attributes
        ID                  : 17
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 0
        y coordinate        : 460
        Width               : 800
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 4589
        Font Color          : 65535
        Horizontal Alignment: left
        Vertical Alignment  : center
        Input Type          : character
        Text                :  Guest
        Max. Text Size      : 32
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tCoil
    Attributes
        ID                  : 21
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 15
        y coordinate        : 260
        Width               : 165
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Apply to:
        Max. Text Size      : 20
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tus
    Attributes
        ID                  : 28
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 278
        y coordinate        : 90
        Width               : 38
        Height              : 40
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 0
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : 탎
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tus1
    Attributes
        ID                  : 35
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 287
        y coordinate        : 308
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : 탎
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tus2
    Attributes
        ID                  : 38
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 380
        y coordinate        : 308
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : 탎
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tus3
    Attributes
        ID                  : 41
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 473
        y coordinate        : 308
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : 탎
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tus4
    Attributes
        ID                  : 44
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 566
        y coordinate        : 308
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : 탎
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tus5
    Attributes
        ID                  : 47
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 659
        y coordinate        : 308
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : 탎
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tus6
    Attributes
        ID                  : 50
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 752
        y coordinate        : 308
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : 탎
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tPerc6
    Attributes
        ID                  : 52
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 752
        y coordinate        : 348
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tPerc1
    Attributes
        ID                  : 53
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 287
        y coordinate        : 348
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tPerc2
    Attributes
        ID                  : 54
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 380
        y coordinate        : 348
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tPerc3
    Attributes
        ID                  : 55
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 473
        y coordinate        : 348
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tPerc5
    Attributes
        ID                  : 56
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 659
        y coordinate        : 348
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tPerc4
    Attributes
        ID                  : 57
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 566
        y coordinate        : 348
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : %
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHz6
    Attributes
        ID                  : 58
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 752
        y coordinate        : 328
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Hz
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHz1
    Attributes
        ID                  : 59
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 287
        y coordinate        : 328
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Hz
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHz2
    Attributes
        ID                  : 60
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 380
        y coordinate        : 328
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Hz
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHz3
    Attributes
        ID                  : 61
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 473
        y coordinate        : 328
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Hz
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHz5
    Attributes
        ID                  : 62
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 659
        y coordinate        : 328
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Hz
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Text tHz4
    Attributes
        ID                  : 63
        Scope               : local
        Send Component ID   : disabled
        x coordinate        : 566
        y coordinate        : 328
        Width               : 20
        Height              : 20
        Locked              : no
        Fill                : solid color
        Style               : flat
        Associated Keyboard : none
        Font ID             : 2
        Back. Color         : 65535
        Font Color          : 6900
        Horizontal Alignment: left
        Vertical Alignment  : bottom
        Input Type          : character
        Text                : Hz
        Max. Text Size      : 2
        Word wrap           : disabled
        Horizontal Spacing  : 0
        Vertical Spacing    : 0
    
    Events
        Touch Press Event
            // Make this object "transparent" for clicks and click background.
            click Simple,1
        
Slider sOn
    Attributes
        ID                     : 4
        Scope                  : local
        Send Component ID      : disabled
        x coordinate           : 345
        y coordinate           : 90
        Width                  : 440
        Height                 : 45
        Locked                 : no
        Direction              : horizontal
        Fill                   : image
        Cursor width           : auto
        Cursor height          : 255
        Back. Picture ID       : 19
        Slided Back. Picture ID: 65535
        Position               : 0
        Upper range limit      : 439
        Lower range limit      : 0
        Channel count          : 25
    
    Events
        Touch Press Event
            keepOntime.val=1
        
        Touch Release Event
            fSliderInput.val=sOn.maxval
            fSliderOutput.val=userOnLimit.val
            fSlider.val=sOn.val
            click fSlider,1 // final Ontime value
            // Round to multiple of five
            fSlider.val/=5
            fSlider.val*=5
            sys1=nBPS.val*fSlider.val/1000 // resulting duty cycle
            if(sys1<=userDutyLimit.val)
            {
                if(nOn.val!=fSlider.val)
                {
                    nOn.val=fSlider.val
                    nDuty.val=sys1
                    fSliderInput.val=sDuty.maxval
                    fSliderOutput.val=userDutyLimit.val
                    fSlider.val=nDuty.val
                    click fSlider,0
                    // Round to multiple of five
                    fSlider.val/=5
                    fSlider.val*=5
                    sDuty.val=fSlider.val
                    newData.val=1
                }
            }
            // to understand the following lines have a look at the Touch Move code.
            // what you would actually wanna do is put the code above in touch move and perform a click event on touch move here (because your can press/release a slider, changing its value without moving it).
            // However "click" can only execute press/release events, so it gets more complicated...
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Slider sBPS
    Attributes
        ID                     : 7
        Scope                  : local
        Send Component ID      : disabled
        x coordinate           : 345
        y coordinate           : 145
        Width                  : 440
        Height                 : 45
        Locked                 : no
        Direction              : horizontal
        Fill                   : image
        Cursor width           : auto
        Cursor height          : 255
        Back. Picture ID       : 19
        Slided Back. Picture ID: 65535
        Position               : 44
        Upper range limit      : 439
        Lower range limit      : 0
        Channel count          : 25
    
    Events
        Touch Release Event
            // Note: nDuty.val is actually in 10ths of percent.
            fSliderInput.val=sBPS.maxval
            fSliderOutput.val=userBPSLimit.val
            fSlider.val=sBPS.val
            click fSlider,1
            // Round to multiple of five
            fSlider.val/=5
            fSlider.val*=5
            temp.val=fSlider.val // final BPS value
            // Depending on whether ontime or duty was set, calculate the resulting value for the other one and check if it's legal.
            if(keepOntime.val>0)
            {
                sys1=nOn.val*temp.val/1000 // resulting duty cycle
                if(sys1<=userDutyLimit.val)
                {
                    nDuty.val=sys1
                    fSliderInput.val=sDuty.maxval
                    fSliderOutput.val=userDutyLimit.val
                    fSlider.val=nDuty.val
                    click fSlider,0
                    // Round to multiple of five
                    fSlider.val/=5
                    fSlider.val*=5
                    sDuty.val=fSlider.val
                }else
                {
                    temp.val=nBPS.val
                }
            }else
            {
                sys1=nDuty.val*1000/temp.val // Resulting Ontime
                if(sys1<=userOnLimit.val)
                {
                    nOn.val=sys1
                    fSliderInput.val=sOn.maxval
                    fSliderOutput.val=userOnLimit.val
                    fSlider.val=nOn.val
                    click fSlider,0
                    // Round to multiple of five
                    fSlider.val/=5
                    fSlider.val*=5
                    sOn.val=fSlider.val
                }else
                {
                    temp.val=nBPS.val
                }
            }
            if(nBPS.val!=temp.val)
            {
                nBPS.val=temp.val
                newData.val=1
            }
            // to understand the following lines have a look at the Touch Move code.
            // what you would actually wanna do is put the code above in touch move and perform a click event on touch move here (because your can press/release a slider, changing its value without moving it).
            // However "click" can only execute press/release events, so it gets more complicated...
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Slider sDuty
    Attributes
        ID                     : 10
        Scope                  : local
        Send Component ID      : disabled
        x coordinate           : 345
        y coordinate           : 200
        Width                  : 440
        Height                 : 45
        Locked                 : no
        Direction              : horizontal
        Fill                   : image
        Cursor width           : auto
        Cursor height          : 255
        Back. Picture ID       : 19
        Slided Back. Picture ID: 65535
        Position               : 0
        Upper range limit      : 439
        Lower range limit      : 0
        Channel count          : 25
    
    Events
        Touch Press Event
            keepOntime.val=0
        
        Touch Release Event
            // Note: nDuty.val is actually in 10ths of percent. .
            fSliderInput.val=sDuty.maxval
            fSliderOutput.val=userDutyLimit.val
            fSlider.val=sDuty.val
            click fSlider,1
            // Round to multiple of five
            fSlider.val/=5
            fSlider.val*=5
            sys1=fSlider.val*1000/nBPS.val // Resulting Ontime
            if(sys1<=userOnLimit.val)
            {
                if(sDuty.val!=fSlider.val)
                {
                    newData.val=1
                    nDuty.val=fSlider.val
                    nOn.val=sys1
                    fSliderInput.val=sOn.maxval
                    fSliderOutput.val=userOnLimit.val
                    fSlider.val=nOn.val
                    click fSlider,0
                    // Round to multiple of five
                    fSlider.val/=5
                    fSlider.val*=5
                    sOn.val=fSlider.val
                }
            }
            // to understand the following lines have a look at the Touch Move code.
            // what you would actually wanna do is put the code above in touch move and perform a click event on touch move here (because your can press/release a slider, changing its value without moving it).
            // However "click" can only execute press/release events, so it gets more complicated...
            if(sMode.txt==bModeRelease.txt)
            {
                click bApply,0
            }
            if(sMode.txt==bModeImmediate.txt)
            {
                click bApply,0
            }
        
Button bModeRelease
    Attributes
        ID                               : 3
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 577
        y coordinate                     : 405
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : On Release
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            vis bModeRelease,0
            vis bModeManual,1
            vis bApply,1
            sMode.txt=bModeManual.txt
        
Button bReturn
    Attributes
        ID                               : 13
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 15
        y coordinate                     : 405
        Width                            : 156
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 7
        Back. Picture ID (Pressed)       : 8
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Return
        Max. Text Size                   : 10
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            // Set outputs to 0
            click Simple,1
        
        Touch Release Event
            // Mode: EXit.
            prints "mex",0
            page Menu
        
Button bModeImmediate
    Attributes
        ID                               : 18
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 577
        y coordinate                     : 405
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Immediately
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            vis bModeImmediate,0
            vis bModeRelease,1
            sMode.txt=bModeRelease.txt
        
Button bModeManual
    Attributes
        ID                               : 19
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 354
        y coordinate                     : 405
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Manually
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            vis bApply,0
            vis bModeManual,0
            vis bModeImmediate,1
            sMode.txt=bModeImmediate.txt
        
Button bApply
    Attributes
        ID                               : 70
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 577
        y coordinate                     : 405
        Width                            : 208
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 9
        Back. Picture ID (Pressed)       : 10
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : Apply now
        Max. Text Size                   : 15
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Release Event
            // Return format: 'd', data byte 1, 2, 3, 4, 5
            // Data byte 1: Bits 0-5: coils to which settings apply.
            // Data byte 2: ontime[us] lower byte
            // Data byte 3: ontime[us] upper byte
            // Data byte 4: BPS lower byte
            // Data byte 5: BPS upper byte
            sys0=newData.val*TC_Settings.activeCoils.val
            if(sys0>0)
            {
                // Update Info below coil buttons
                if(btCoil1.val==1)
                {
                    nOn1.val=nOn.val
                    nBPS1.val=nBPS.val
                    nDuty1.val=nDuty.val
                }
                if(btCoil2.val==1)
                {
                    nOn2.val=nOn.val
                    nBPS2.val=nBPS.val
                    nDuty2.val=nDuty.val
                }
                if(btCoil3.val==1)
                {
                    nOn3.val=nOn.val
                    nBPS3.val=nBPS.val
                    nDuty3.val=nDuty.val
                }
                if(btCoil4.val==1)
                {
                    nOn4.val=nOn.val
                    nBPS4.val=nBPS.val
                    nDuty4.val=nDuty.val
                }
                if(btCoil5.val==1)
                {
                    nOn5.val=nOn.val
                    nBPS5.val=nBPS.val
                    nDuty5.val=nDuty.val
                }
                if(btCoil6.val==1)
                {
                    nOn6.val=nOn.val
                    nBPS6.val=nBPS.val
                    nDuty6.val=nDuty.val
                }
                prints "d",0
                prints TC_Settings.activeCoils.val,1
                prints nOn.val,2
                prints nBPS.val,2
                newData.val=0
            }
        
Dual-state Button btCoil1
    Attributes
        ID                               : 22
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 242
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 3
        Back. Picture ID (Pressed)       : 4
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 1
        Max. Text Size                   : 3
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil1.txt
        
        Touch Release Event
            // A coil might have been enabled, and thus does not have the currently displayed values.
            newData.val=1
            // Bit 0-5 correspond to the state of the buttons btCoil1-btCoil6
            sys0=btCoil1.val
            sys0=btCoil2.val*2+sys0
            sys0=btCoil3.val*4+sys0
            sys0=btCoil4.val*8+sys0
            sys0=btCoil5.val*16+sys0
            sys0=btCoil6.val*32+sys0
            // Store settings
            TC_Settings.activeCoils.val=sys0
        
Dual-state Button btCoil2
    Attributes
        ID                               : 23
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 335
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 3
        Back. Picture ID (Pressed)       : 4
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 2
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil2.txt
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil3
    Attributes
        ID                               : 24
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 428
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 3
        Back. Picture ID (Pressed)       : 4
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 3
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil3.txt
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil4
    Attributes
        ID                               : 25
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 521
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 3
        Back. Picture ID (Pressed)       : 4
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 4
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil4.txt
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil5
    Attributes
        ID                               : 26
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 614
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 3
        Back. Picture ID (Pressed)       : 4
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 5
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil5.txt
        
        Touch Release Event
            click btCoil1,0
        
Dual-state Button btCoil6
    Attributes
        ID                               : 27
        Scope                            : local
        Send Component ID                : disabled
        x coordinate                     : 707
        y coordinate                     : 259
        Width                            : 78
        Height                           : 45
        Locked                           : no
        Fill                             : image
        Font ID                          : 0
        Background Picture ID (Unpressed): 3
        Back. Picture ID (Pressed)       : 4
        Horizontal Alignment             : center
        Vertical Alignment               : center
        State                            : unpressed
        Text                             : 6
        Max. Text Size                   : 4
        Word wrap                        : disabled
        Horizontal Spacing               : 0
        Vertical Spacing                 : 0
    
    Events
        Touch Press Event
            sCoil.txt=btCoil6.txt
        
        Touch Release Event
            click btCoil1,0
        
